(function(){"use strict";var e={6890:function(e,t,i){i(6992),i(8674),i(9601),i(7727);var n=i(538),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("DisplayMain")],1)},s=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("HomeHeader"),i("router-view"),i("HomeFooter")],1)},r=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"0"}},[i("router-link",{attrs:{to:"/"}},[e._v("首页")])],1),i("el-menu-item",{attrs:{index:"1"}},[e._v(" 村落自动分类 ")]),i("el-menu-item",{attrs:{index:"2"}},[i("router-link",{attrs:{to:"/autoSortingPage"}},[e._v("营建显著性点位发掘")])],1),i("el-menu-item",{attrs:{index:"3"}},[e._v(" 村落宜居区域发掘 ")]),i("el-menu-item",{attrs:{index:"4"}},[e._v(" 村落营建基因发掘 ")]),i("el-menu-item",{attrs:{index:"5"}},[i("router-link",{attrs:{to:"/wyPage"}},[e._v("山形可视化")])],1)],1)],1)},c=[],u={name:"HomeHeader",data:function(){return{activeIndex:"0"}},methods:{handleSelect:function(e,t){console.log(e,t)}}},m=u,d=i(1001),p=(0,d.Z)(m,l,c,!1,null,null,null),f=p.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},g=[],v={},y=v,x=(0,d.Z)(y,h,g,!1,null,null,null),P=x.exports,_={name:"DisplayMain",components:{HomeHeader:f,HomeFooter:P}},w=_,b=(0,d.Z)(w,a,r,!1,null,null,null),C=b.exports,$={name:"app",components:{DisplayMain:C}},S=$,A=(0,d.Z)(S,o,s,!1,null,null,null),L=A.exports,k=i(8345),N=i(4720),E=i.n(N);n["default"].use(E());var D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-container",[i("BandSide"),i("el-main",[i("div",{staticClass:"center"},[i("CesiumDemo")],1)])],1)],1)},I=[],T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-aside",{staticClass:"aside",attrs:{width:"110px"}},[i("img",{staticStyle:{margin:"5px 1px 0px 1px"},attrs:{src:e.clickPic,width:"80px"}}),i("div",[i("h4",{staticStyle:{margin:"0px 1px 0px 1px"}},[e._v("请上传数据")]),e.canSee?i("i",{staticClass:"el-icon-loading"}):e._e(),e.canSee?i("h1",[e._v("处理中...")]):e._e(),i("UploadFiles"),i("AccessAblityCalculate"),i("AscensionPointGenerate"),i("ExposivePointGenerate")],1)])],1)},F=[],U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{multiple:"",action:"#",limit:2,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-change":e.handleChange,"http-request":e.selectFiles,"on-exceed":e.handleExceed,"file-list":e.fileList,"auto-upload":!1}},[i("el-button",{staticClass:"buttonSelect",attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),i("el-button",{staticClass:"uploadButton",attrs:{size:"small",type:"success"},on:{"~click":function(t){return e.submitUpload.apply(null,arguments)}}},[e._v("上传文件")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)},O=[],M=(i(9826),i(1539),i(7042),i(8309),i(9669)),R=i.n(M),Z={name:"UploadFiles",data:function(){return{canSee:!1,fileList:[],fileData:"",activeIndex:"2",loadPage:{}}},methods:{selectFiles:function(e){this.fileData.append("files",e.file)},handleChange:function(e,t){var i=t.slice(0,t.length-1).find((function(t){return t.name===e.name}));i&&(this.$message.error("当前文件已经存在!"),t.pop()),this.fileList=t},handleRemove:function(e,t){this.fileList=t,this.$store.state.imgUrls={}},handleExceed:function(e,t){this.$message.warning("当前限制选择 2 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},submitUpload:function(){var e=this;this.fileList.length<2?this.$message({message:"请先选择2个文件",type:"warning"}):(console.log("here"),this.fileData=new FormData,this.$refs.upload.submit(),this.fileData.append("loginToken",this.loginToken),this.loadPage=this.$loading({lock:!0,text:"处理中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.canSee=!0,R().post("/uploadFiles",this.fileData).then((function(t){0===t.data.result.code?(e.$message({message:"上传成功",type:"success"}),e.$store.commit("modifyImageUrls",[t.data.result.dem_url,2]),e.$store.commit("modifyImageUrls",[t.data.result.remote_url,1]),e.$store.commit("modifyCenterCoord",t.data.result.centerCoord),""!=t.data.result.dem_url&&e.$store.state.pageFunction()):e.$message({message:"上传失败",type:"error"}),e.loadPage.close(),e.canSee=!1})).catch((function(e){console.log(e)})))}}},z=Z,B=(0,d.Z)(z,U,O,!1,null,null,null),G=B.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h4",{staticStyle:{margin:"0px 1px 0px 1px"}},[e._v("计算可达域")]),i("el-select",{attrs:{placeholder:"步行时间",size:"small"},on:{change:e.catTimeLimit},model:{value:e.time_limit,callback:function(t){e.time_limit=t},expression:"time_limit"}},e._l(e.options1,(function(e){return i("el-option",{key:e.time_limit,attrs:{label:e.label,value:e.time_limit}})})),1),i("el-input",{attrs:{placeholder:"dem精度",size:"small",clearable:""},model:{value:e.demAxis,callback:function(t){e.demAxis=t},expression:"demAxis"}}),i("el-button",{staticStyle:{"margin-left":"0px",width:"100px"},attrs:{size:"small",type:"success"},on:{click:e.distantCalc}},[e._v("可达域计算")])],1)},j=[],H={name:"AccessAblityCalculate",data:function(){return{canSee:!1,loadPage:{},options1:[{time_limit:"15",label:"15min"},{time_limit:"30",label:"30min"},{time_limit:"45",label:"45min"},{time_limit:"60",label:"60min"}],demAxis:""}},methods:{catTimeLimit:function(e){this.$store.commit("modifyTimeLimit",e),console.log("选择的value为："+this.time_limit)},distantCalc:function(){var e=this;this.loadPage=this.$loading({lock:!0,text:"处理中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.canSee=!0,R().post("/distantCalc",{time_limit:this.$store.getters.getTimeLimit,demAxis:this.demAxis}).then((function(t){0===t.data.result.code?(e.$message({message:"计算成功",type:"success"}),e.$store.commit("modifyCenterPoint",t.data.result.centerpoint),e.$store.commit("modifyAccessDomain",t.data.result.accessdomain_path),e.$store.commit("modifyVillageLocation",t.data.result.location),""!=t.data.result.accessdomain_path&&e.$store.state.accessDomainFunction()):e.$message({message:"计算失败",type:"error"}),e.loadPage.close(),e.canSee=!1}))}}},W=H,q=(0,d.Z)(W,V,j,!1,null,null,null),J=q.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h4",{staticStyle:{margin:"0px 1px 0px 1px"}},[e._v("计算登临点")]),i("el-select",{attrs:{placeholder:"登临点数量",size:"small"},on:{change:e.catAscensionPointNum},model:{value:e.ascensionPointNum,callback:function(t){e.ascensionPointNum=t},expression:"ascensionPointNum"}},e._l(e.options2,(function(e){return i("el-option",{key:e.ascensionPointNum,attrs:{label:e.label,value:e.ascensionPointNum}})})),1),i("el-input",{attrs:{placeholder:"计算间隔",size:"small",clearable:""},model:{value:e.divideSpace,callback:function(t){e.divideSpace=t},expression:"divideSpace"}}),i("el-button",{staticStyle:{"margin-left":"0px",width:"100px"},attrs:{size:"small",type:"success"},on:{click:e.calAscensionPoint}},[e._v("计算登临点 ")])],1)},K=[],Q={name:"AscensionPointGenereate",data:function(){return{canSee:!1,loadPage:{},options2:[{ascensionPointNum:"1",label:"1"},{ascensionPointNum:"5",label:"5"},{ascensionPointNum:"10",label:"10"}],divideSpace:""}},methods:{catAscensionPointNum:function(e){this.$store.commit("modifyAscensionPointNum",e),console.log("登临点数量："+e)},calAscensionPoint:function(){var e=this;this.loadPage=this.$loading({lock:!0,text:"处理中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),R().post("/calAscensionPoint",{ascensionPointNum:this.$store.getters.getAscensionPointNum,divideSpace:this.divideSpace}).then((function(t){if(0===t.data.result.code){e.$message({message:"计算成功",type:"success"});var i=t.data.result.ascension_point_list,n=t.data.result.ascensionpoint_viewshedpathlist;e.$store.commit("modifyAscensionPointCoords",i),e.$store.commit("modifyViewShedUrl",n),""!=i&&e.$store.state.ascensionPointFunction()}else e.$message({message:"计算失败",type:"error"});e.loadPage.close()}))}}},Y=Q,ee=(0,d.Z)(Y,X,K,!1,null,null,null),te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h4",{staticStyle:{margin:"0px 1px 0px 1px"}},[e._v("计算暴露点")]),i("el-select",{attrs:{placeholder:"暴露点数量",size:"small"},on:{change:e.catExposivePointNum},model:{value:e.exposivePointNum,callback:function(t){e.exposivePointNum=t},expression:"exposivePointNum"}},e._l(e.options2,(function(e){return i("el-option",{key:e.exposivePointNum,attrs:{label:e.label,value:e.exposivePointNum}})})),1),i("el-button",{staticStyle:{"margin-left":"0px",width:"100px"},attrs:{size:"small",type:"success"},on:{click:e.calExposivePoint}},[e._v("计算暴露点 ")])],1)},ne=[],oe={name:"ExposivePointGenerate",data:function(){return{canSee:!1,loadPage:{},options2:[{exposivePointNum:"1",label:"1"},{exposivePointNum:"5",label:"5"},{exposivePointNum:"10",label:"10"}]}},methods:{catExposivePointNum:function(e){this.$store.commit("modifyExposivePointNum",e),console.log("暴露点数量："+e)},calExposivePoint:function(){var e=this;this.loadPage=this.$loading({lock:!0,text:"处理中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.canSee=!0,R().post("/calExposivePoint",{exposivePointNum:this.$store.getters.getExposivePointNum}).then((function(t){if(0===t.data.result.code){e.$message({message:"计算成功",type:"success"});var i=t.data.result.exposivepoint_numlist_absolute;e.$store.commit("modifyExposivePointCoords",i),""!=i&&e.$store.state.exposivePointFunction()}else e.$message({message:"计算失败",type:"error"});e.loadPage.close(),e.canSee=!1}))}}},se=oe,ae=(0,d.Z)(se,ie,ne,!1,null,null,null),re=ae.exports,le={name:"BandSide",data:function(){return{clickPic:i(714)}},methods:{},components:{UploadFiles:G,AccessAblityCalculate:J,AscensionPointGenerate:te,ExposivePointGenerate:re}},ce=le,ue=(0,d.Z)(ce,T,F,!1,null,null,null),me=ue.exports,de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"cesiumContainer"}})},pe=[],fe=i(5450),he={name:"CesiumDemo",data:function(){return{viewer:null,accesspointsLayer:null,viewshedpointsLayer:null}},mounted:function(){this.cesiumInit(),this.configInit(),this.terrainSerivce(),this.imageService(),this.$store.commit("setPageFunction",this.viewerFly),this.$store.commit("setAccessDomain",this.addAccessPointsLayer),this.$store.commit("setAscensionPoint",this.showAscensionPoints),this.$store.commit("setExposivePoint",this.showExposivePoints)},methods:{cesiumInit:function(){fe.f3v.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmODE5ZmVkOS0zMzNkLTRhZDItYmE1NS1iOWU5MjA4ZDYwNzgiLCJpZCI6NjA3MzQsImlhdCI6MTYyNTQwNjc2M30.AhvFT18WWD0biep1Le_7RHXRwBXrtQb6U2ihTnhH1nM",this.viewer=new fe.AEx("cesiumContainer")},configInit:function(){this.viewer.animation._container.style.display="none",this.viewer.timeline.container.style.display="none",this.viewer.fullscreenButton.container.style.display="none",this.viewer.geocoder.container.style.display="none",this.viewer.homeButton.container.style.display="none",this.viewer.navigationHelpButton.container.style.display="none",this.viewer.sceneModePicker.container.style.display="none",this.viewer.baseLayerPicker.container.style.display="none",this.viewer._cesiumWidget._creditContainer.style.display="none"},terrainSerivce:function(){var e=new fe.DX$({url:fe.CdF.fromAssetId(1),requestVertexNormals:!1,isShowGlobe:!0});this.viewer.terrainProvider=e},imageService:function(){var e=new fe.PdK({url:"http://t0.tianditu.com/img_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=img&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles",layer:"tiandituImg",style:"default",format:"image/jpeg",tileMatrixSetID:"tiandituImg",show:!0,maximumLevel:18});this.viewer.imageryProvider=e},addAccessPointsLayer:function(){var e=this.viewer.scene.imageryLayers,t=this.$store.getters.getVillageLocation,i=new fe.AeJ.fromDegrees(t[0],t[1],t[2],t[3]);null==this.accesspointsLayer||e.remove(this.accesspointsLayer,!0),this.accesspointsLayer=e.addImageryProvider(new fe.BFO({url:this.$store.getters.getAccessDomain,rectangle:i})),this.accesspointsLayer.alpha=.2,this.accesspointsLayer.brightness=1.5;var n=this.$store.getters.getCenterPoint[0],o=this.$store.getters.getCenterPoint[1];this.viewer.entities.add({position:fe.b91.fromDegrees(n,o),point:{show:!0,color:fe.Ilk.BLUE,pixelSize:6,outlineColor:fe.Ilk.BLACK,outlineWidth:1,heightReference:fe.MDq.CLAMP_TO_GROUND}})},viewerFly:function(){this.viewer.scene.camera.flyTo({destination:fe.b91.fromDegrees(this.$store.state.centerCoord[0],this.$store.state.centerCoord[1],3e3),duration:4,orientation:{heading:fe.ZX$.toRadians(-10),pitch:fe.ZX$.toRadians(-90)}})},showAccessPoints:function(){var e=null;e=this.viewer.scene.primitives.add(new fe.XVf);for(var t=this.$store.getters.getCoords,i=0;i<t.length;i++){var n=fe.b91.fromDegrees(t[i][0][0],t[i][0][1],t[i][1]);e.add({pixelSize:6,color:fe.Ilk.BLUE,outlineColor:fe.Ilk.BLACK,outlineWidth:1,position:n,heightReference:fe.MDq.CLAMP_TO_GROUND})}},showAscensionPoints:function(){for(var e=this,t=this.$store.getters.getCoords,i=0;i<t.length;i++){var n=this.$store.getters.getCoords[i][0],o=this.$store.getters.getCoords[i][1];this.viewer.entities.add({position:fe.b91.fromDegrees(n,o),point:{show:!0,color:fe.Ilk.RED,pixelSize:6,outlineColor:fe.Ilk.BLACK,outlineWidth:1,heightReference:fe.MDq.CLAMP_TO_GROUND}})}var s=this.viewer.scene.imageryLayers,a=this.$store.getters.getVillageLocation,r=new fe.AeJ.fromDegrees(a[0],a[1],a[2],a[3]),l=new fe.SjE(this.viewer.canvas),c=this.$store.getters.getViewShed;l.setInputAction((function(){null==e.viewshedpointsLayer?(s.remove(e.accesspointsLayer,!0),e.viewshedpointsLayer=s.addImageryProvider(new fe.BFO({url:c[0],rectangle:r}))):(s.remove(e.viewshedpointsLayer,!0),e.viewshedpointsLayer=s.addImageryProvider(new fe.BFO({url:e.$store.getters.getViewShed,rectangle:r}))),e.viewshedpointsLayer.alpha=.2,e.viewshedpointsLayer.brightness=1.5}),fe.Wvr.LEFT_CLICK)},showExposivePoints:function(){for(var e=this.$store.getters.getCoords,t=0;t<e.length;t++){var i=this.$store.getters.getCoords[t][0],n=this.$store.getters.getCoords[t][1];this.viewer.entities.add({position:fe.b91.fromDegrees(i,n),point:{show:!0,color:fe.Ilk.GREEN,pixelSize:6,outlineColor:fe.Ilk.BLACK,outlineWidth:1,heightReference:fe.MDq.CLAMP_TO_GROUND}})}}}},ge=he,ve=(0,d.Z)(ge,de,pe,!1,null,null,null),ye=ve.exports,xe={name:"AutoSortingPage",data:function(){return{showrowdemo:!1}},components:{BandSide:me,CesiumDemo:ye}},Pe=xe,_e=(0,d.Z)(Pe,D,I,!1,null,null,null),we=_e.exports,be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-main",[i("div",[i("h1",{staticClass:"textCenter"},[e._v("传统村落绿色宜居营建基因挖掘系统")]),i("p",{staticClass:"textCenter"},[e._v("Author")]),i("div",{staticClass:"imgCenter"},[i("img",{attrs:{src:e.imgSrc}})])])])],1)},Ce=[],$e={name:"HomeMain",data:function(){return{imgSrc:i(8151)}}},Se=$e,Ae=(0,d.Z)(Se,be,Ce,!1,null,null,null),Le=Ae.exports,ke=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ne=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",[e._v("Test")])])}],Ee={},De=Ee,Ie=(0,d.Z)(De,ke,Ne,!1,null,null,null),Te=Ie.exports,Fe=new k.Z({routes:[{path:"/",component:Le},{path:"/autoSortingPage",component:we},{path:"/wyPage",component:Te}]}),Ue=(i(9714),i(629));n["default"].use(Ue.ZP);var Oe={},Me={modifyImageUrls:function(e,t){e.imgUrls["imageUrl"+t[1].toString()]=t[0].toString()},modifyCenterCoord:function(e,t){e.centerCoord=t},setPageFunction:function(e,t){e.pageFunction=t},modifyTimeLimit:function(e,t){e.time_limit=t},modifyCenterPoint:function(e,t){e.centerpoint=t},modifyAccessDomain:function(e,t){e.accessdomain_path=t},setAccessDomain:function(e,t){e.accessDomainFunction=t},modifyAscensionPointNum:function(e,t){e.ascensionPointNum=t},modifyVillageLocation:function(e,t){e.location=t},modifyAscensionPointCoords:function(e,t){e.coords=t},setAscensionPoint:function(e,t){e.ascensionPointFunction=t},modifyViewShedUrl:function(e,t){e.viewshedUrls=t},modifyExposivePointNum:function(e,t){e.exposivePointNum=t},modifyExposivePointCoords:function(e,t){e.coords=t},setExposivePoint:function(e,t){e.exposivePointFunction=t}},Re={space:"",imgUrls:{imageUrl1:"",imageUrl2:""},accessdomain_path:"",centerCoord:{},centerpoint:{},coords:{},time_limit:0,ascensionPointNum:0,exposivePointNum:0,location:{},viewshedUrls:{},pageFunction:{},accessDomainFunction:{},ascensionPointFunction:{},exposivePointFunction:{}},Ze={getImgUrls:function(e){return e.imgUrls},getCoords:function(e){return e.coords},getTimeLimit:function(e){return e.time_limit},getAccessDomain:function(e){return e.accessdomain_path},getCenterPoint:function(e){return e.centerpoint},getAscensionPointNum:function(e){return e.ascensionPointNum},getViewShed:function(e){return e.viewshedUrls},getExposivePointNum:function(e){return e.exposivePointNum},getVillageLocation:function(e){return e.location}},ze=new Ue.ZP.Store({actions:Oe,mutations:Me,state:Re,getters:Ze});n["default"].config.productionTip=!1,n["default"].use(k.Z),new n["default"]({render:function(e){return e(L)},router:Fe,store:ze}).$mount("#app")},8151:function(e,t,i){e.exports=i.p+"static/img/QMC.48576ca4.png"},714:function(e,t,i){e.exports=i.p+"static/img/click.cae6261b.png"}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,n,o,s){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],s=e[u][2];for(var r=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(r=!1,s<a&&(a=s));if(r){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,o,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p=""}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,s,a=n[0],r=n[1],l=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(l)var u=l(i)}for(t&&t(n);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(u)},n=self["webpackChunkvue_cesium_dev"]=self["webpackChunkvue_cesium_dev"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(6890)}));n=i.O(n)})();
//# sourceMappingURL=app-legacy.a0c05059.js.map